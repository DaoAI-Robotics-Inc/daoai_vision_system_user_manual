案例分析
===========

.. content::
    :local:

拍摄金属件时，为了保持点云质量，RBG图片亮度低怎么办？
-------------------------------------------------------

    .. image:: images/case_pcc.png
        :scale: 70%

如上图，设置了相机参数为暗一点的时候，点云质量会更好，可是图片过暗，边缘匹配时无法正确的匹配到边缘。这种情况该怎么办呢？

可以在相机参数中，启用点云颜色（Point Cloud Color）功能，并调试曝光参数并采集验证。该功能会在采图时额外采集一张图片作为点云和RGB图片的颜色。该亮度可以独立设置，不会影响点云的质量。

    .. image:: images/point_cloud_color.png
        :scale: 70%

这样就可以在保持点云质量不变的同时，增加RGB图像的亮度，以更好的进行2D边缘匹配。

如何分层抓取物体？
-------------------------------------------------------

    - 您可在抓取顺序中打开“使用层过滤”功能，并输入所需要的层高数值。视觉就会将识别到的物体按您所设置的层高及过滤数值重新将识别到的物体分层。
    - 如下图所示：视觉可以识别到4个物体、两层、由于打开了层过滤功能、并选择了只保留1层的识别物。则视觉重新排序后就只保留了最上层的识别物。

    .. image:: images/层1.png
        :scale: 70%
 

    - 如下图所示：没有打开层过滤功能、并保留0层的识别物。则视觉就会将所有识别到的物体按您所设置的“Z值最高”排序。

    .. image:: images/层2.png
        :scale: 70%

如何顺序抓取物体？
-------------------------------------------------------

    .. note::
        抓取顺序中设置的坐标系参考的是相机坐标系、不是物体（Object）坐标系。

    - 您可在抓取顺序中设置“按以下顺序抓取物体”中选择：X值最高。这样视觉就会将识别到的物体按照X轴由高到底的顺序来排序，如下图所示，物体由右到左有序排列。
     
    .. image:: images/X最高.png
        :scale: 70%

    - 您可在抓取顺序中设置“按以下顺序抓取物体”中选择：X值最低。这样视觉就会将识别到的物体按照X轴由低到高的顺序来排序，如下图所示，物体由左到右有序排列。

    .. image:: images/X值最低.png
        :scale: 70%

    - 同理，您也可以选择“Y值最低”“Y轴最高”等参数，将视觉识别到的物体按照您想要的方向进行排序、从而让机器人有序抓取。

    .. image:: images/排序选择坐标轴.png
        :scale: 70%
    

如何从最上方抓取物体？
-------------------------------------------------------

    - 您可在抓取顺序中设置“按以下顺序抓取物体”中选择：Z值最高。这样视觉就会将识别到的物体按照Z轴由高到底的顺序来排序、如下图所示"4"比"1"Z值低、视觉排序之后优先抓取“1”
    .. image:: images/分层抓取排序.png
        :scale: 70%

    


防碰撞功能如何使用？
-------------------------------------------------------

    - 您可在防碰撞中打开倾斜和虚拟框体碰撞功能、当机器人tool坐标Z轴与物体Z轴夹角超过设定的度数或机器人末端夹爪模型与您所设置的虚拟框体发生碰撞时、防碰撞模块判定该物体抓取时会有碰撞风险、视觉判定不抓取。

    .. image:: images/防碰撞.png
        :scale: 70%